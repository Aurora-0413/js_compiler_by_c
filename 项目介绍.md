# JavaScript ç¼–è¯‘å™¨ - é¡¹ç›®æŠ€æœ¯æ–‡æ¡£

> **é¡¹ç›®**: js_compiler_by_c  
> **ç‰ˆæœ¬**: 2.0.0  
> **æ›´æ–°**: 2025å¹´11æœˆ18æ—¥  
> **å®šä½**: åŸºäº C è¯­è¨€çš„ ECMAScript 5.1 ç¼–è¯‘å™¨å‰ç«¯

---

## ğŸ“Œ é¡¹ç›®ç®€ä»‹

`js_compiler_by_c` æ˜¯ä¸€ä¸ªå®Œå…¨ä»é›¶å¼€å§‹ç”¨ C è¯­è¨€å®ç°çš„ JavaScript ç¼–è¯‘å™¨å‰ç«¯é¡¹ç›®ï¼Œä¸¥æ ¼éµå¾ª **ECMAScript 5.1 è§„èŒƒ**ã€‚é¡¹ç›®å®ç°äº†å®Œæ•´çš„è¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰æ„å»ºå’Œè‡ªåŠ¨åˆ†å·æ’å…¥ï¼ˆASIï¼‰æœºåˆ¶ã€‚

### é€‚ç”¨åœºæ™¯

- ğŸ“š **ç¼–è¯‘åŸç†å­¦ä¹ ** - ç†è§£ç¼–è¯‘å™¨å‰ç«¯çš„å·¥ä½œåŸç†
- ğŸ” **JavaScript è¯­æ³•ç ”ç©¶** - æ·±å…¥äº†è§£ ECMAScript è§„èŒƒ
- ğŸ› ï¸ **ä»£ç åˆ†æå·¥å…·å¼€å‘** - ä½œä¸ºé™æ€åˆ†æå·¥å…·çš„åŸºç¡€
- ğŸ“ **æ•™å­¦æ¼”ç¤º** - ç”¨äºç¼–è¯‘åŸç†è¯¾ç¨‹çš„å®è·µé¡¹ç›®

### æŠ€æœ¯ç‰¹ç‚¹

- âœ… å®Œå…¨ä»é›¶å®ç°ï¼Œæ— ç¬¬ä¸‰æ–¹ä¾èµ–
- âœ… æ¨¡å—åŒ–è®¾è®¡ï¼Œä»£ç ç»“æ„æ¸…æ™°
- âœ… å®Œæ•´çš„æ³¨é‡Šå’Œæ–‡æ¡£
- âœ… è·¨å¹³å°æ”¯æŒï¼ˆWindows/Linux/macOSï¼‰
- âœ… 100% æµ‹è¯•è¦†ç›–

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### ç¼–è¯‘æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JavaScript æºä»£ç                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              è¯æ³•åˆ†æå™¨ (Lexer)                          â”‚
â”‚  - re2c ç”Ÿæˆçš„æœ‰é™çŠ¶æ€è‡ªåŠ¨æœº                             â”‚
â”‚  - Token è¯†åˆ«ä¸åˆ†ç±»                                      â”‚
â”‚  - è¡Œå·/åˆ—å·è·Ÿè¸ª                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ Token æµ
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              è¯­æ³•åˆ†æå™¨ (Parser)                         â”‚
â”‚  - Bison ç”Ÿæˆçš„ LALR(1) è§£æå™¨                          â”‚
â”‚  - è‡ªåŠ¨åˆ†å·æ’å…¥ (ASI) æœºåˆ¶                               â”‚
â”‚  - è¯­æ³•é”™è¯¯æ£€æµ‹ä¸æŠ¥å‘Š                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ è¯­æ³•ç»“æ„
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æŠ½è±¡è¯­æ³•æ ‘ (AST)                               â”‚
â”‚  - 30+ ç§èŠ‚ç‚¹ç±»å‹                                        â”‚
â”‚  - ç»Ÿä¸€çš„æ„é€ /æ‰“å°/éå†/é‡Šæ”¾æ¥å£                         â”‚
â”‚  - å†…å­˜å®‰å…¨ä¿éšœ                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¨¡å—

| æ¨¡å—         | æ–‡ä»¶                          | åŠŸèƒ½                 | æŠ€æœ¯          |
| ------------ | ----------------------------- | -------------------- | ------------- |
| **è¯æ³•åˆ†æ** | `lexer.re` â†’ `build/lexer.c`  | Token è¯†åˆ«           | re2c FSA      |
| **è¯­æ³•åˆ†æ** | `parser.y` â†’ `build/parser.c` | è¯­æ³•è§„åˆ™åŒ¹é…         | Bison LALR(1) |
| **AST æ„å»º** | `src/ast/ast.c`               | è¯­æ³•æ ‘èŠ‚ç‚¹ç®¡ç†       | æ‰‹å·¥å®ç°      |
| **é€‚é…å±‚**   | `parser_lex_adapter.c`        | è¯æ³•/è¯­æ³•æ¡¥æ¥        | æ‰‹å·¥å®ç°      |
| **å·¥å…·åº“**   | `src/utils/utils.c`           | å†…å­˜/å­—ç¬¦ä¸²/æ–‡ä»¶å·¥å…· | æ‰‹å·¥å®ç°      |

---

## âš¡ æ ¸å¿ƒç‰¹æ€§

### è¯æ³•åˆ†æå™¨ (`js_lexer.exe`)

| åŠŸèƒ½         | è¯´æ˜                 | ç¤ºä¾‹                                    |
| ------------ | -------------------- | --------------------------------------- |
| **å…³é”®å­—**   | 27 ä¸ª ES5 å…³é”®å­—     | `var`, `function`, `if`, `for`, `while` |
| **è¿ç®—ç¬¦**   | 73+ ç§è¿ç®—ç¬¦         | `+`, `-`, `*`, `/`, `==`, `===`, `&&`   |
| **å­—é¢é‡**   | æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ | `123`, `"hello"`, `true`, `null`        |
| **æ³¨é‡Š**     | å•è¡Œå’Œå¤šè¡Œæ³¨é‡Š       | `//`, `/* ... */`                       |
| **ä½ç½®è·Ÿè¸ª** | ç²¾ç¡®çš„è¡Œå·å’Œåˆ—å·     | Line 1, Col 5                           |

**æ•°å­—å­—é¢é‡æ”¯æŒï¼š**
- æ•´æ•°ï¼š`42`, `0`
- æµ®ç‚¹æ•°ï¼š`3.14`, `.5`
- ç§‘å­¦è®¡æ•°æ³•ï¼š`1e5`, `2.5e-3`
- åå…­è¿›åˆ¶ï¼š`0xFF`, `0x1A`

### è¯­æ³•åˆ†æå™¨ (`js_parser.exe`)

**å®Œæ•´çš„è¯­å¥æ”¯æŒï¼š**

| ç±»å‹           | è¯­æ³•                             | è¯´æ˜               |
| -------------- | -------------------------------- | ------------------ |
| å˜é‡å£°æ˜       | `var x = 10;`                    | æ”¯æŒ var/let/const |
| å‡½æ•°å£°æ˜       | `function foo() {}`              | å‘½åå‡½æ•°           |
| if/else        | `if (x > 0) {} else {}`          | æ¡ä»¶åˆ†æ”¯           |
| for å¾ªç¯       | `for (i=0; i<10; i++) {}`        | æ ‡å‡† for å¾ªç¯      |
| for-in         | `for (key in obj) {}`            | å¯¹è±¡éå†           |
| while          | `while (x > 0) {}`               | å‰ç½®æ¡ä»¶å¾ªç¯       |
| do-while       | `do {} while (x < 10);`          | åç½®æ¡ä»¶å¾ªç¯       |
| switch         | `switch (x) { case 1: break; }`  | å¤šåˆ†æ”¯é€‰æ‹©         |
| try-catch      | `try {} catch (e) {} finally {}` | å¼‚å¸¸å¤„ç†           |
| throw          | `throw new Error();`             | æŠ›å‡ºå¼‚å¸¸           |
| with           | `with (obj) {}`                  | ä½œç”¨åŸŸæ‰©å±•         |
| break/continue | `break label;`                   | æµç¨‹æ§åˆ¶           |
| return         | `return x;`                      | å‡½æ•°è¿”å›           |

**è¡¨è¾¾å¼æ”¯æŒï¼š**
- âœ… ç®—æœ¯ï¼š`+`, `-`, `*`, `/`, `%`
- âœ… æ¯”è¾ƒï¼š`<`, `>`, `<=`, `>=`, `==`, `!=`, `===`, `!==`
- âœ… é€»è¾‘ï¼š`&&`, `||`, `!`
- âœ… ä½è¿ç®—ï¼š`&`, `|`, `^`, `~`, `<<`, `>>`, `>>>`
- âœ… èµ‹å€¼ï¼š`=`, `+=`, `-=`, etc.
- âœ… ä¸‰å…ƒï¼š`? :`
- âœ… é€—å·ï¼š`,`
- âœ… å‡½æ•°è°ƒç”¨ï¼š`func(a, b)`
- âœ… æˆå‘˜è®¿é—®ï¼š`obj.prop`, `arr[0]`
- âœ… å¯¹è±¡å­—é¢é‡ï¼š`{a: 1, b: 2}`
- âœ… æ•°ç»„å­—é¢é‡ï¼š`[1, 2, 3]`

### è‡ªåŠ¨åˆ†å·æ’å…¥ (ASI)

éµå¾ª **ECMA-262 è§„èŒƒ 11.9 èŠ‚**ï¼š

| è§¦å‘æ¡ä»¶       | è¯´æ˜                                  | ç¤ºä¾‹                                             |
| -------------- | ------------------------------------- | ------------------------------------------------ |
| **æ¢è¡Œ**       | ä¸¤ä¸ª Token é—´æœ‰æ¢è¡Œä¸”æ— æ³•å½¢æˆåˆæ³•è¯­å¥ | `var a = 1\nvar b = 2` â†’ `var a = 1; var b = 2;` |
| **EOF**        | æ–‡ä»¶ç»“æŸæ—¶æœªå®Œæˆçš„è¯­å¥                | `var x = 10` â†’ `var x = 10;`                     |
| **å—é™äº§ç”Ÿå¼** | return/throw/continue/break åæ¢è¡Œ    | `return\n42` â†’ `return; 42;`                     |

### AST æ¡†æ¶

**èŠ‚ç‚¹ç±»å‹ï¼ˆ30+ï¼‰ï¼š**
- ç¨‹åºç»“æ„ï¼šProgram, Block
- å£°æ˜ï¼šVarDecl, FunctionDecl
- è¯­å¥ï¼šReturnStmt, IfStmt, ForStmt, WhileStmt, SwitchStmt, TryStmt
- è¡¨è¾¾å¼ï¼šIdentifier, Literal, BinaryExpr, UnaryExpr, CallExpr, MemberExpr

**æ ¸å¿ƒæ¥å£ï¼š**
```c
// èŠ‚ç‚¹æ„é€ 
ASTNode* ast_make_program(ASTList* body);
ASTNode* ast_make_if(ASTNode* test, ASTNode* consequent, ASTNode* alternate);
ASTNode* ast_make_for(ASTNode* init, ASTNode* test, ASTNode* update, ASTNode* body);

// é“¾è¡¨æ“ä½œ
ASTList* ast_list_append(ASTList* list, ASTNode* node);
ASTList* ast_list_concat(ASTList* head, ASTList* tail);

// å·¥å…·å‡½æ•°
void ast_print(ASTNode* node);           // æ‰“å° AST
void ast_free(ASTNode* node);            // é‡Šæ”¾å†…å­˜
void ast_traverse(ASTNode* node, ...);   // éå†è®¿é—®
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

#### Windows ç¯å¢ƒ

**1. å®‰è£… MSYS2**
- ä¸‹è½½ï¼šhttps://www.msys2.org/
- å®‰è£…åæ‰“å¼€ "MSYS2 MinGW 64-bit" ç»ˆç«¯

**2. å®‰è£…å·¥å…·é“¾**
```bash
# æ›´æ–°åŒ…ç®¡ç†å™¨
pacman -Syu

# å®‰è£…ç¼–è¯‘å·¥å…·
pacman -S mingw-w64-x86_64-gcc re2c bison make
```

**3. éªŒè¯å®‰è£…**
```bash
gcc --version
re2c --version
bison --version
```

#### Linux / macOS ç¯å¢ƒ

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install gcc re2c bison make

# Fedora/RHEL
sudo dnf install gcc re2c bison make

# macOS (éœ€è¦ Homebrew)
brew install gcc re2c bison make
```

### æ„å»ºé¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/Aurora-0413/js_compiler_by_c.git
cd js_compiler_by_c

# Windows æ„å»º
.\build.bat parser

# Linux/macOS æ„å»º
make parser
```

### åŸºæœ¬ä½¿ç”¨

**1. è¯æ³•åˆ†æ**
```bash
.\js_lexer.exe tests\test_basic.js
```

è¾“å‡ºï¼š
```
=== Lexical Analysis of 'tests\test_basic.js' ===
[  1] Line   1, Col   1: VAR         = 'var'
[  2] Line   1, Col   5: IDENTIFIER  = 'x'
[  3] Line   1, Col   7: =
[  4] Line   1, Col   9: NUMBER      = '10'
[  5] Line   1, Col  11: ;
```

**2. è¯­æ³•åˆ†æ**
```bash
.\js_parser.exe tests\test_basic.js
```

è¾“å‡ºï¼š
```
[PASS] tests\test_basic.js - no syntax errors detected.
```

**3. æŸ¥çœ‹ AST**
```bash
.\js_parser.exe --dump-ast tests\test_basic.js
```

è¾“å‡ºï¼š
```
=== AST Dump ===
Program
  VariableDeclaration (var)
    name: "x"
    init:
      Literal(10)
  IfStatement
    test:
      BinaryExpression(>)
        left: Identifier(x)
        right: Literal(0)
    consequent:
      BlockStatement
        ...
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
js_compiler_by_c/
â”œâ”€â”€ include/                    # å…¬å…±å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ token.h                # Token å®šä¹‰ä¸è¯æ³•åˆ†æå™¨æ¥å£
â”‚   â”œâ”€â”€ ast.h                  # AST èŠ‚ç‚¹å®šä¹‰ä¸æ¥å£
â”‚   â”œâ”€â”€ utils.h                # å·¥å…·å‡½æ•°åº“
â”‚   â””â”€â”€ parser_adapter.h       # è§£æå™¨é€‚é…å±‚æ¥å£
â”‚
â”œâ”€â”€ src/                        # æºä»£ç å®ç°
â”‚   â”œâ”€â”€ ast/
â”‚   â”‚   â””â”€â”€ ast.c              # AST å®ç°ï¼ˆ1000+ è¡Œï¼‰
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ utils.c            # å·¥å…·å‡½æ•°å®ç°
â”‚   â””â”€â”€ (lexer/, parser/ è§„åˆ™åœ¨æ ¹ç›®å½•)
â”‚
â”œâ”€â”€ build/                      # æ„å»ºè¾“å‡ºï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ lexer.c                # re2c ç”Ÿæˆï¼ˆ~1500 è¡Œï¼‰
â”‚   â”œâ”€â”€ parser.c/.h            # Bison ç”Ÿæˆï¼ˆ~2500 è¡Œï¼‰
â”‚   â””â”€â”€ *.o                    # ç›®æ ‡æ–‡ä»¶
â”‚
â”œâ”€â”€ tests/                      # æµ‹è¯•ç”¨ä¾‹ï¼ˆ16+ ä¸ªï¼‰
â”‚   â”œâ”€â”€ test_basic.js
â”‚   â”œâ”€â”€ test_functions.js
â”‚   â”œâ”€â”€ test_asi_*.js
â”‚   â””â”€â”€ test_error_*.js
â”‚
â”œâ”€â”€ docs/                       # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ BUILD.md
â”‚   â”œâ”€â”€ TEST_REPORT.md
â”‚   â”œâ”€â”€ asi_implementation.md
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ main.c                      # è¯æ³•åˆ†æå™¨å…¥å£
â”œâ”€â”€ parser_main.c               # è¯­æ³•åˆ†æå™¨å…¥å£
â”œâ”€â”€ lexer.re                    # è¯æ³•è§„åˆ™ï¼ˆre2c æºï¼‰
â”œâ”€â”€ parser.y                    # è¯­æ³•è§„åˆ™ï¼ˆBison æºï¼‰
â”œâ”€â”€ parser_lex_adapter.c        # é€‚é…å±‚å®ç°
â”œâ”€â”€ Makefile                    # Linux/macOS æ„å»ºè„šæœ¬
â”œâ”€â”€ build.bat                   # Windows æ„å»ºè„šæœ¬
â”œâ”€â”€ README.md                   # é¡¹ç›®ä½¿ç”¨è¯´æ˜ï¼ˆè‹±æ–‡ï¼‰
â””â”€â”€ é¡¹ç›®ä»‹ç».md                 # æœ¬æ–‡æ¡£ï¼ˆä¸­æ–‡æŠ€æœ¯æ–‡æ¡£ï¼‰
```

---

## ğŸ§ª æµ‹è¯•

### æµ‹è¯•è¦†ç›–

é¡¹ç›®åŒ…å« **16+ ä¸ªæµ‹è¯•æ–‡ä»¶**ï¼š

| ç±»åˆ«     | æ–‡ä»¶                                 | æµ‹è¯•å†…å®¹                |
| -------- | ------------------------------------ | ----------------------- |
| åŸºç¡€è¯­æ³• | `test_basic.js`                      | å˜é‡å£°æ˜ã€if/elseã€å¾ªç¯ |
| å‡½æ•°     | `test_functions.js`                  | å‡½æ•°å£°æ˜ã€è°ƒç”¨ã€åµŒå¥—    |
| å¾ªç¯     | `test_for_loops.js`, `test_while.js` | å„ç§å¾ªç¯ç»“æ„            |
| å­—é¢é‡   | `test_literals.js`                   | å¯¹è±¡ã€æ•°ç»„å­—é¢é‡        |
| è¿ç®—ç¬¦   | `test_operators.js`                  | è¿ç®—ç¬¦ä¼˜å…ˆçº§            |
| æ§åˆ¶æµ   | `test_switch.js`, `test_try.js`      | switchã€try-catch       |
| ASI      | `test_asi_*.js`                      | è‡ªåŠ¨åˆ†å·æ’å…¥            |
| é”™è¯¯æ£€æµ‹ | `test_error_*.js`                    | è¯­æ³•é”™è¯¯æ£€æµ‹            |

### è¿è¡Œæµ‹è¯•

```bash
# Windows
.\build.bat test-parser

# Linux/macOS
make test-parser
```

è¾“å‡ºï¼š
```
========== Testing Parser ==========
Testing tests\test_basic.js ... âœ“ PASS
Testing tests\test_functions.js ... âœ“ PASS
Testing tests\test_for_loops.js ... âœ“ PASS
...
========== Test Summary ==========
Passed: 16
Failed: 0
âœ“ All parser tests passed!
```

---

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°è¯­æ³•ç‰¹æ€§

ä»¥æ·»åŠ  `debugger` è¯­å¥ä¸ºä¾‹ï¼š

**1. æ›´æ–°è¯æ³•åˆ†æå™¨ (`lexer.re`)**
```c
"debugger" { 
    lexer->column += 8;
    lexer->prev_tok_state = PREV_TOK_NO_REGEX;
    return make_token(TOK_DEBUGGER, token_start, lexer->cursor,
                     token_line, token_column);
}
```

**2. æ›´æ–° Token å®šä¹‰ (`include/token.h`)**
```c
typedef enum {
    // ...
    TOK_DEBUGGER,
    // ...
} TokenType;
```

**3. æ›´æ–°è¯­æ³•åˆ†æå™¨ (`parser.y`)**
```yacc
%token DEBUGGER

%%

debugger_statement
    : DEBUGGER semicolon
        { $$ = ast_make_debugger(); }
    ;
```

**4. æ›´æ–° AST (`include/ast.h`, `src/ast/ast.c`)**
```c
// ast.h
typedef enum {
    // ...
    AST_DEBUGGER_STMT,
    // ...
} ASTNodeType;

ASTNode* ast_make_debugger(void);

// ast.c
ASTNode* ast_make_debugger(void) {
    return ast_alloc(AST_DEBUGGER_STMT);
}
```

**5. é‡æ–°æ„å»º**
```bash
.\build.bat clean
.\build.bat parser
```

### è°ƒè¯•æŠ€å·§

**1. æŸ¥çœ‹ Token æµ**
```bash
.\js_lexer.exe myfile.js > tokens.txt
```

**2. å¯ç”¨ Bison è°ƒè¯•**
```c
// parser_main.c
extern int yydebug;
yydebug = 1;  // å¯ç”¨è¯¦ç»†è°ƒè¯•
```

**3. ä½¿ç”¨ GDB**
```bash
gdb ./js_parser.exe
(gdb) break yyparse
(gdb) run tests/test_basic.js
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Ÿ

**A:** åˆ†å±‚è®¾è®¡ä¾¿äºæ•™å­¦å’Œè°ƒè¯•ï¼š
- `js_lexer.exe` - è¯æ³•åˆ†æå™¨ï¼Œè¾“å‡º Token æµ
- `js_parser.exe` - å®Œæ•´ç¼–è¯‘å™¨å‰ç«¯ï¼ˆè¯æ³•+è¯­æ³•+ASTï¼‰

### Q2: æ”¯æŒ ES6+ å—ï¼Ÿ

**A:** ä¸æ”¯æŒã€‚é¡¹ç›®ä»…æ”¯æŒ **ECMAScript 5.1**ã€‚

ä¸æ”¯æŒçš„ç‰¹æ€§ï¼š
- âŒ ç®­å¤´å‡½æ•° `() => {}`
- âŒ ç±» `class`
- âŒ æ¨¡æ¿å­—ç¬¦ä¸² `` `${x}` ``
- âŒ è§£æ„èµ‹å€¼
- âŒ async/await
- âŒ import/export

### Q3: æ„å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. å·¥å…·é“¾æ˜¯å¦æ­£ç¡®å®‰è£…ï¼ˆ`gcc --version`, `re2c --version`, `bison --version`ï¼‰
2. è·¯å¾„ä¸­æ˜¯å¦åŒ…å«ç©ºæ ¼æˆ–ä¸­æ–‡ï¼ˆå»ºè®®ä½¿ç”¨è‹±æ–‡è·¯å¾„ï¼‰
3. æ˜¯å¦æœ‰æƒé™é—®é¢˜ï¼ˆWindows éœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
4. å°è¯•æ¸…ç†åé‡æ–°æ„å»ºï¼š`.\build.bat clean` â†’ `.\build.bat parser`

### Q4: å¦‚ä½•è´¡çŒ®ä»£ç ï¼Ÿ

**A:** æ ‡å‡†æµç¨‹ï¼š
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/your-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -am 'Add: your feature'`
4. æ¨é€åˆ° GitHubï¼š`git push origin feature/your-feature`
5. åˆ›å»º Pull Request

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡             | æ•°å€¼                      |
| ---------------- | ------------------------- |
| **æ€»ä»£ç è¡Œæ•°**   | ~3000 è¡Œ                  |
| **C æºæ–‡ä»¶**     | 8 ä¸ª                      |
| **å¤´æ–‡ä»¶**       | 4 ä¸ª                      |
| **ç”Ÿæˆä»£ç **     | ~4000 è¡Œ (lexer + parser) |
| **æµ‹è¯•æ–‡ä»¶**     | 16+ ä¸ª                    |
| **æ”¯æŒå…³é”®å­—**   | 27 ä¸ª                     |
| **æ”¯æŒè¿ç®—ç¬¦**   | 73+ ä¸ª                    |
| **AST èŠ‚ç‚¹ç±»å‹** | 30+ ç§                    |
| **æµ‹è¯•é€šè¿‡ç‡**   | 100%                      |

---

## ğŸ“š å‚è€ƒèµ„æ–™

### å®˜æ–¹è§„èŒƒ
- [ECMAScript 5.1 è§„èŒƒ](https://262.ecma-international.org/5.1/)
- [ASI è§„åˆ™ï¼ˆ11.9 èŠ‚ï¼‰](https://262.ecma-international.org/5.1/#sec-11.9)

### å·¥å…·æ–‡æ¡£
- [re2c å®˜æ–¹æ‰‹å†Œ](https://re2c.org/manual/manual_c.html)
- [GNU Bison æ‰‹å†Œ](https://www.gnu.org/software/bison/manual/)
- [GCC æ–‡æ¡£](https://gcc.gnu.org/onlinedocs/)

### å‚è€ƒé¡¹ç›®
- [Esprima](https://esprima.org/) - JavaScript è§£æå™¨
- [Acorn](https://github.com/acornjs/acorn) - è½»é‡çº§ JS è§£æå™¨
- [Babel Parser](https://babeljs.io/docs/en/babel-parser) - Babel è§£æå™¨

### å­¦ä¹ èµ„æº
- ã€Šç¼–è¯‘åŸç†ã€‹ï¼ˆé¾™ä¹¦ï¼‰- Alfred V. Aho ç­‰è‘—
- ã€Šç°ä»£ç¼–è¯‘åŸç†ã€‹- Andrew W. Appel è‘—
- ã€Šç¨‹åºè®¾è®¡è¯­è¨€å®ç°æ¨¡å¼ã€‹- Terence Parr è‘—

---

## ğŸ‘¥ è´¡çŒ®è€…

- [Stardreama](https://github.com/Stardreama)
- [Limpid-8818](https://github.com/Limpid-8818)
- [FanZDStar](https://github.com/FanZDStar)
- [Aurora-0413](https://github.com/Aurora-0413)

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯**ã€‚

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### Version 2.0.0 (2025-11-18)
- âœ¨ å®Œå…¨é‡æ„é¡¹ç›®ç»“æ„ï¼Œæ¨¡å—åŒ–è®¾è®¡
- âœ¨ åˆ›å»º `include/` å’Œ `src/` ç›®å½•
- âœ¨ æ–°å¢ `src/ast/ast.c` å®Œæ•´å®ç°
- âœ¨ æ–°å¢ `src/utils/utils.c` å·¥å…·åº“
- âœ¨ ä¼˜åŒ–å¤´æ–‡ä»¶ï¼Œæ·»åŠ å®Œæ•´æ³¨é‡Š
- âœ¨ æ”¹è¿›æ„å»ºç³»ç»Ÿ
- âœ¨ ä¿®å¤å‘½åå…¼å®¹æ€§é—®é¢˜
- âœ¨ å®Œå–„æ–‡æ¡£ä½“ç³»

### Version 1.0.0 (2025-11-11)
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®Œæ•´çš„è¯æ³•åˆ†æå™¨
- âœ… å®Œæ•´çš„è¯­æ³•åˆ†æå™¨
- âœ… ASI æœºåˆ¶å®ç°
- âœ… AST æ„å»ºä¸è¾“å‡º
- âœ… 16+ ä¸ªæµ‹è¯•ç”¨ä¾‹

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª Starï¼â­**

Made with â¤ï¸ by JS Compiler Team

</div>
